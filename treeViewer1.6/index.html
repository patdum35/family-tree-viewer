<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light">
  <title>Redirection...</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    .icon {
      font-size: 60px;
      text-align: center;
      margin-bottom: 20px;
    }
    
    h1 {
      color: #333;
      font-size: 24px;
      text-align: center;
      margin-bottom: 15px;
    }
    
    .browser-name {
      color: #667eea;
      font-weight: bold;
      background: #f0f0f0;
      padding: 5px 10px;
      border-radius: 5px;
      display: inline-block;
    }
    
    p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .steps {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }
    
    .steps ol {
      padding-left: 20px;
      color: #444;
    }
    
    .steps li {
      margin: 10px 0;
      line-height: 1.5;
    }
    
    .button {
      display: block;
      width: 100%;
      padding: 15px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin: 10px 0;
      transition: all 0.3s;
    }
    
    .button:hover {
      background: #45a049;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
    }
    
    .button.secondary {
      background: #2196F3;
    }
    
    .button.secondary:hover {
      background: #0b7dda;
    }
    
    .continue-link {
      text-align: center;
      margin-top: 20px;
    }
    
    .continue-link a {
      color: #999;
      text-decoration: none;
      font-size: 14px;
    }
    
    .continue-link a:hover {
      color: #667eea;
      text-decoration: underline;
    }
    
    .loading {
      text-align: center;
      color: #666;
      font-size: 18px;
    }
    
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .success {
      color: #4CAF50;
      font-weight: bold;
      text-align: center;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container" id="content">
    <div class="loading">
      <div class="spinner"></div>
      <p>V√©rification du navigateur...</p>
    </div>
  </div>

  <script>
    // ‚ö†Ô∏è CONFIGUREZ ICI L'URL DE VOTRE APPLICATION
    // const APP_URL = 'https://votre-repo.github.io/votre-app';
    // const APP_URL = 'http://127.0.0.1:5502/treeViewer1.6.html';
    const APP_URL = 'https://patdum35.github.io/family-tree-viewer/treeViewer1.6/treeViewer1.6.html';
';

    // Liste des navigateurs probl√©matiques connus
    const PROBLEMATIC_BROWSERS = [
      'samsungbrowser',
      'miuibrowser',
      'xbrowser',
      'oppo',
      'vivo',
      'huawei',
      'ucbrowser',
      'oppo browser'
    ];
    
    function detectBrowser() {
      const ua = navigator.userAgent.toLowerCase();
      
      // D√©tecter les navigateurs probl√©matiques
      for (let browser of PROBLEMATIC_BROWSERS) {
        if (ua.includes(browser)) {
          return {
            problematic: true,
            name: getBrowserName(browser, ua)
          };
        }
      }
      
      // D√©tecter si c'est le navigateur syst√®me Android g√©n√©rique
      if (ua.includes('android') && !ua.includes('chrome') && !ua.includes('firefox') && !ua.includes('safari')) {
        return {
          problematic: true,
          name: 'Navigateur syst√®me Android'
        };
      }
      
      return { problematic: false };
    }
    
    function getBrowserName(browser, ua) {
      const names = {
        'samsungbrowser': 'Samsung Internet',
        'miuibrowser': 'MIUI Browser',
        'xbrowser': 'Mi Browser',
        'oppo': 'Oppo Browser',
        'vivo': 'Vivo Browser',
        'huawei': 'Huawei Browser',
        'ucbrowser': 'UC Browser'
      };
      return names[browser] || 'Navigateur syst√®me';
    }
    
    function copyUrl() {
      const url = APP_URL;
      
      // M√©thode moderne
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(url).then(() => {
          showSuccess();
        }).catch(() => {
          fallbackCopy(url);
        });
      } else {
        fallbackCopy(url);
      }
    }
    
    function fallbackCopy(text) {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      document.body.appendChild(textArea);
      textArea.select();
      
      try {
        document.execCommand('copy');
        showSuccess();
      } catch (err) {
        alert('Impossible de copier automatiquement. Copiez manuellement : ' + text);
      }
      
      document.body.removeChild(textArea);
    }
    
    function showSuccess() {
      const successMsg = document.createElement('div');
      successMsg.className = 'success';
      successMsg.textContent = '‚úÖ URL copi√©e ! Ouvre maintenant Chrome ou Firefox';
      document.querySelector('.steps').after(successMsg);
      
      setTimeout(() => {
        successMsg.remove();
      }, 3000);
    }
    
    function tryOpenInChrome() {
      const url = APP_URL.replace('https://', '');
      const chromeIntent = `intent://${url}#Intent;scheme=https;package=com.android.chrome;end`;
      
      window.location.href = chromeIntent;
      
      // Si Chrome n'est pas install√©, proposer Firefox
      setTimeout(() => {
        const firefoxIntent = `intent://${url}#Intent;scheme=https;package=org.mozilla.firefox;end`;
        window.location.href = firefoxIntent;
        
        // Si rien ne fonctionne, message
        setTimeout(() => {
          alert('Chrome et Firefox ne semblent pas install√©s. Utilisez le bouton "Copier l\'URL" et ouvrez-la dans un autre navigateur.');
        }, 1500);
      }, 1500);
    }
    
    function continueAnyway() {
      window.location.href = APP_URL;
    }
    
    function showWarning(browserName) {
      document.getElementById('content').innerHTML = `
        <div class="icon">‚ö†Ô∏è</div>
        <h1>Navigateur non compatible d√©tect√©</h1>
        <p>Vous utilisez <span class="browser-name">${browserName}</span></p>
        <p>Ce navigateur inverse les couleurs en mode sombre, ce qui rend l'application difficile √† utiliser.</p>
        
        <div class="steps">
          <strong>Pour une exp√©rience optimale :</strong>
          <ol>
            <li>Cliquez sur "Copier l'URL" ci-dessous</li>
            <li>Ouvrez <strong>Chrome</strong> ou <strong>Firefox</strong></li>
            <li>Collez l'URL dans la barre d'adresse</li>
            <li>Validez</li>
          </ol>
        </div>
        
        <button class="button" onclick="copyUrl()">
          üìã Copier l'URL
        </button>
        
        <button class="button secondary" onclick="tryOpenInChrome()">
          üöÄ Essayer d'ouvrir dans Chrome
        </button>
        
        <div class="continue-link">
          <a href="#" onclick="continueAnyway(); return false;">
            Continuer quand m√™me (non recommand√©)
          </a>
        </div>
      `;
    }
    
    function redirectToApp() {
      document.getElementById('content').innerHTML = `
        <div class="icon">‚úÖ</div>
        <h1>Navigateur compatible !</h1>
        <div class="loading">
          <div class="spinner"></div>
          <p>Redirection vers l'application...</p>
        </div>
      `;
      
      setTimeout(() => {
        window.location.href = APP_URL;
      }, 1000);
    }
    
    // Ex√©cution au chargement
    window.addEventListener('DOMContentLoaded', () => {
      const browserInfo = detectBrowser();
      
      if (browserInfo.problematic) {
        showWarning(browserInfo.name);
      } else {
        redirectToApp();
      }
    });
  </script>
</body>
</html>